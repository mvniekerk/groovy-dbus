apply plugin: 'maven'
apply plugin: 'groovy'

version = '0.1'
group= 'com.chazaqdev.dbus'

jar {
	baseName = 'groovy-dbus'
	manifest {
		attributes (
			'Implementation-Title': 'Groovy DBus Implementation',
			'Implementation-Version': version,
			'Provider': 'ChazaqDev', 
			'Main-Class': 'com.chazaqdev.dbus.DBus',
			'Group-Id': 'com.chazaqdev.dbus'
			)
	}
}

repositories {
	mavenCentral()
	mavenLocal()
}

dependencies {
	compile 'org.codehaus.groovy:groovy-all:2.4.1'
	compile 'org.apache.commons:commons-lang3:3.3.2'
	compile 'org.codehaus.gpars:gpars:1.2.1'
	testCompile 'org.spockframework:spock-core:1.0-groovy-2.4'
	compile 'log4j:log4j:1.2.17'
}

task fatJar(type: Jar) {
	baseName = 'groovy-debus-all'
	from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }

        exclude 'META-INF/*.RSA', 'META-INF/*.SF','META-INF/*.DSA'
	manifest {
                attributes 'Implementation-Title': 'Groovy DBus Implementation', 
                'Implementation-Version': version, 
                provider: 'ChazaqDev', 
                'Main-Class': 'com.chazaqdev.dbus.DBus'
        }
   	with jar
}


